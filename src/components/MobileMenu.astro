---
// Mobile burger menu component for project navigation
---

<button
    id="mobile-menu-toggle"
    class="mobile-menu-toggle"
    aria-label="Toggle navigation menu"
    aria-expanded="false"
>
    <span class="hamburger-icon">
        <span></span>
        <span></span>
        <span></span>
    </span>
</button>

<div id="mobile-menu-overlay" class="mobile-menu-overlay" aria-hidden="true">
    <div class="mobile-menu-content">
        <button
            id="mobile-menu-close"
            class="mobile-menu-close"
            aria-label="Close navigation menu"
        >
            âœ•
        </button>

        <div class="mobile-menu-inner">
            <slot />
        </div>
    </div>
</div>

<script>
    // Mobile menu toggle functionality
    const toggle = document.getElementById("mobile-menu-toggle");
    const overlay = document.getElementById("mobile-menu-overlay");
    const close = document.getElementById("mobile-menu-close");
    const body = document.body;

    function openMenu() {
        overlay?.setAttribute("aria-hidden", "false");
        overlay?.classList.add("active");
        toggle?.setAttribute("aria-expanded", "true");
        body.style.overflow = "hidden"; // Prevent background scroll
    }

    function closeMenu() {
        overlay?.setAttribute("aria-hidden", "true");
        overlay?.classList.remove("active");
        toggle?.setAttribute("aria-expanded", "false");
        body.style.overflow = ""; // Restore scroll
    }

    toggle?.addEventListener("click", () => {
        const isOpen = overlay?.classList.contains("active");
        isOpen ? closeMenu() : openMenu();
    });

    close?.addEventListener("click", closeMenu);

    // Close on overlay click (outside menu)
    overlay?.addEventListener("click", (e) => {
        if (e.target === overlay) {
            closeMenu();
        }
    });

    // Close on Escape key
    document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && overlay?.classList.contains("active")) {
            closeMenu();
        }
    });

    // Close menu when navigating to a project
    document.addEventListener("click", (e) => {
        const target = e.target as HTMLElement;
        const projectLink = target.closest(".project-link");
        if (projectLink && overlay?.classList.contains("active")) {
            closeMenu();
        }
    });
</script>

<style>
    /* ===================================
     MOBILE MENU TOGGLE BUTTON
     =================================== */
    .mobile-menu-toggle {
        display: none;
        position: fixed;
        top: 1.5rem;
        right: 1.5rem;
        z-index: 1001;
        background: var(--bg-color);
        border: 1px solid var(--border-color);
        padding: 0.75rem;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .mobile-menu-toggle:hover {
        background: var(--text-primary);
    }

    .mobile-menu-toggle:hover .hamburger-icon span {
        background: var(--bg-color);
    }

    .mobile-menu-toggle:focus-visible {
        outline: 2px solid var(--text-primary);
        outline-offset: 2px;
    }

    /* Hamburger Icon */
    .hamburger-icon {
        display: flex;
        flex-direction: column;
        gap: 4px;
        width: 20px;
        height: 16px;
    }

    .hamburger-icon span {
        display: block;
        width: 100%;
        height: 2px;
        background: var(--text-primary);
        transition: all 0.3s ease;
    }

    /* Animated hamburger when menu is open */
    .mobile-menu-toggle[aria-expanded="true"]
        .hamburger-icon
        span:nth-child(1) {
        transform: translateY(6px) rotate(45deg);
    }

    .mobile-menu-toggle[aria-expanded="true"]
        .hamburger-icon
        span:nth-child(2) {
        opacity: 0;
    }

    .mobile-menu-toggle[aria-expanded="true"]
        .hamburger-icon
        span:nth-child(3) {
        transform: translateY(-6px) rotate(-45deg);
    }

    /* ===================================
     MOBILE MENU OVERLAY
     =================================== */
    .mobile-menu-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
    }

    .mobile-menu-overlay.active {
        opacity: 1;
        pointer-events: auto;
    }

    /* ===================================
     MOBILE MENU CONTENT
     =================================== */
    .mobile-menu-content {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 85%;
        max-width: 400px;
        background: var(--bg-color);
        border-left: 1px solid var(--border-color);
        padding: 2rem 1.5rem;
        overflow-y: auto;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        -webkit-overflow-scrolling: touch;
    }

    .mobile-menu-overlay.active .mobile-menu-content {
        transform: translateX(0);
    }

    /* Close button */
    .mobile-menu-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: none;
        border: none;
        font-size: 2rem;
        line-height: 1;
        color: var(--text-primary);
        cursor: pointer;
        padding: 0.5rem;
        transition: opacity 0.2s ease;
    }

    .mobile-menu-close:hover {
        opacity: 0.7;
    }

    .mobile-menu-close:focus-visible {
        outline: 2px solid var(--text-primary);
        outline-offset: 2px;
    }

    /* Menu inner content */
    .mobile-menu-inner {
        margin-top: 3rem;
    }

    /* ===================================
     RESPONSIVE BEHAVIOR
     =================================== */
    @media (max-width: 1023px) {
        .mobile-menu-toggle,
        .mobile-menu-overlay {
            display: block;
        }
    }

    @media (min-width: 1024px) {
        .mobile-menu-toggle,
        .mobile-menu-overlay {
            display: none !important;
        }
    }

    /* ===================================
     ACCESSIBILITY
     =================================== */
    @media (prefers-reduced-motion: reduce) {
        .mobile-menu-overlay,
        .mobile-menu-content,
        .hamburger-icon span {
            transition: none;
        }
    }

    /* High contrast mode */
    @media (prefers-contrast: high) {
        .mobile-menu-toggle {
            border: 2px solid var(--text-primary);
        }

        .mobile-menu-overlay {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: none;
        }
    }

    /* Print: hide menu */
    @media print {
        .mobile-menu-toggle,
        .mobile-menu-overlay {
            display: none !important;
        }
    }
</style>
